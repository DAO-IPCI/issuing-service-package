(function(t){function e(e){for(var s,o,a=e[0],c=e[1],l=e[2],d=0,f=[];d<a.length;d++)o=a[d],r[o]&&f.push(r[o][0]),r[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],s=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(s=!1)}s&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var s={},r={app:0},i=[];function o(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=s,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var s=n("a026"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("web3-check",[n("div",[t.ready?n("Page"):n("div",[t._v("Initialization Robonomics")])],1)])],1)},i=[],o=n("0963"),a=n.n(o),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",{staticClass:"text-md-center"},[t._v("Данные ВИЭ “Вертушка”")]),n("v-container",{staticClass:"px-3",attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{md12:""}},[n("v-card",[n("v-card-text",[n("v-container",{staticClass:"px-3",attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{md12:""}},[n("b",[t._v("Маяк")]),t._v(":\n                    "),n("a",{attrs:{href:"https://etherscan.io/address/"+t.lighthouse.address,target:"blank"}},[t._v(t._s(t.lighthouse.name))])])],1)],1),n("v-divider"),n("v-container",{staticClass:"px-3",attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{md12:""}},[n("div",[n("b",[t._v("Адрес владельца ВИЭ в сети")]),t._v(": "),n("a",{attrs:{href:"https://etherscan.io/address/"+t.account,target:"blank"}},[t._v(t._s(t.account))])]),n("div",[n("b",[t._v("Стоимость")]),t._v(": "+t._s(t._f("fromWei")(t.price,9,"XRT"))+" |\n                      "),n("b",[t._v("Баланс")]),t._v(":\n                      "),n("a",{attrs:{href:"https://etherscan.io/token/"+t.token+"?a="+t.account,target:"blank"}},[t._v(t._s(t._f("fromWei")(t.balance,9,"XRT")))])])])],1)],1)],1)],1)],1),n("v-flex",{attrs:{md12:""}},[t.liability.length>0?n("v-card",[n("v-card-title",{attrs:{"primary-title":""}},[n("div",[n("h3",{staticClass:"headline mb-0"},[t._v("Показания с 01 по 30 мая 2019 года")])])]),t._l(t.liability,function(e,s){return n("v-card-text",{key:s},[n("b",[t._v("Суммарная генерация: 100 МВт")]),n("br"),n("b",[t._v("Лог от счётчика:")]),n("a",{attrs:{href:"https://ipfs.io/ipfs/"+e.result,target:"_blank"}},[t._v(t._s(e.result))]),n("br"),n("b",[t._v("Отправить показания на проверку")]),n("br"),n("v-btn",{attrs:{disabled:!!t.resultSent},on:{click:function(n){return t.confirm(e.address)}}},[t._v("Подтвердить")]),n("v-btn",{attrs:{disabled:!!t.resultSent}},[t._v("Отклонить")]),n("br")],1)})],2):t._e()],1)],1),n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{md6:""}},[n("v-card",[n("v-card-title",{attrs:{"primary-title":""}},[n("div",[n("h3",{staticClass:"headline mb-0"},[t._v("Данные проверки верификатора:")])])]),n("v-card-text",t._l(t.results,function(e,s){return n("div",{key:s,staticClass:"t-break"},["finish"===e.status?n("div",[n("b",[t._v("Проверка по открытым источникам данных о скорости ветра:")]),t._v(" успешно.\n                  "),n("br"),n("b",[t._v("Создан реестр зеленых сертификатов по адресу:")]),t._v(" 0x\n                  "),n("br"),n("b",[t._v("Выполнена транзакция на выдачу 100 зеленых сертификатов на адрес владельца")]),t._v(" promisee\n                ")]):t._e()])}),0)],1)],1),n("v-flex",{attrs:{md6:""}},[n("v-card",[n("v-card-title",{attrs:{"primary-title":""}},[n("div",[n("h3",{staticClass:"headline mb-0"},[t._v("Данные сохраненные в публичный Ethereum blockchain:")])])]),n("v-card-text",t._l(t.results,function(e,s){return n("p",{key:s,staticClass:"t-break"},[n("b",[t._v("ВИЭ:")]),t._v(" "+t._s(t.promisor)+"\n                "),n("br"),n("b",[t._v("Информация о выдаче зеленых сертификатов в распределенном реестре доступна по адресу:")]),t._v(" "+t._s(e.liability)+"\n                "),n("br"),n("b",[t._v("Лог от ВИЭ:")]),t._v(" ipfs hash\n                "),n("br"),n("b",[t._v("Лог от верификатора:")]),t._v(" ipfs hash\n              ")])}),0)],1)],1)],1)],1)],1)},l=[],u=(n("20d6"),n("cebc")),d=n("75fc"),f=(n("7514"),n("c5f6"),n("7f7f"),n("4aac")),b=n.n(f),p=4451,v={version:5,ens:"0xaC4Ac4801b50b74aa3222B5Ba282FF54407B3941",ensSuffix:"sid",lighthouse:"airalab.lighthouse.5.robonomics.sid"},h="0x17B82177D8753bd8090dadA60B953CFaDD9eF492",m=0,w={repo:"ipfs/robonomics",relay:{enabled:!0,hop:{enabled:!0}},EXPERIMENTAL:{pubsub:!0},config:{Addresses:{Swarm:["/dns4/ws-star.discovery.libp2p.io/tcp/443/wss/p2p-websocket-star","/dns4/1.wsstar.aira.life/tcp/443/wss/p2p-websocket-star/","/dns4/2.wsstar.aira.life/tcp/443/wss/p2p-websocket-star/"]},Bootstrap:["/dns4/ams-1.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd","/dns4/lon-1.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLMeWqB7YGVLJN3pNLQpmmEk35v6wYtsMGLzSr5QBU3","/dns4/nyc-1.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLueR4xBeUbY9WZ9xGUUxunbKWcrNFTDAadQJmocnWm","/dns4/nyc-2.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64","/dns4/node0.preload.ipfs.io/tcp/443/wss/ipfs/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/ipfs/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/1.pubsub.aira.life/tcp/443/wss/ipfs/QmdfQmbmXt6sqjZyowxPUsmvBsgSGQjm4VXrV7WGy62dv8","/dns4/2.pubsub.aira.life/tcp/443/wss/ipfs/QmPTFt7GJ2MfDuVYwJJTULr6EnsQtGVp8ahYn9NSyoxmd9"]}},y={data:function(){return{lighthouse:{name:"",address:""},account:"",price:m,token:"",balance:0,approveTrade:0,loadingApprove:!1,liability:[],results:[],promisor:"",promisee:"",nonce:0}},mounted:function(){var t=this;this.lighthouse.name=this.$robonomics.lighthouse.name,this.lighthouse.address=this.$robonomics.lighthouse.address,this.account=this.$robonomics.account.address,this.token=this.$robonomics.xrt.address,this.$robonomics.factory.call.nonceOf(this.$robonomics.account.address).then(function(e){t.nonce=Number(e)}),this.$robonomics.onResult(function(e){console.log(e);var n=t.results.find(function(t){return t.liability===e.liability});if(!n){var s=new f["Liability"](t.$robonomics.web3,e.liability,"0x0000000000000000000000000000000000000000");s.getInfo().then(function(s){s.validator===t.$robonomics.web3.toChecksumAddress(h)&&("finish"==n.status?t.results=[Object(u["a"])({},e,{status:"finish"})].concat(Object(d["a"])(t.results)):t.results=[Object(u["a"])({},e,{status:"new"})].concat(Object(d["a"])(t.results)))})}}),this.$robonomics.onLiability(function(e,n){var s=t.liability.find(function(t){return t.address===n.address});s||(n.getInfo().then(function(e){t.promisor=e.promisor,t.promisee=e.promisee,t.liability=[Object(u["a"])({address:n.address,worker:n.worker},e)].concat(Object(d["a"])(t.liability))}),n.onResult().then(function(e){t.setResult(n.address,e,!0)}))}),this.fetchBalance(),this.liability.push({address:"0x911Ea2bE315f4dEDbc8C457eB9A1234971f59A81",lighthouse:"0x202a09A451DE674d2d65Bf1C90968a8d8F72cf7b",validator:"0x17B82177D8753bd8090dadA60B953CFaDD9eF492",model:"QmUB6ajZTLLMZg7re1v4hw44aoG8HDQDHr9JyujU264Aw2",objective:"Qmbm3o2wkqseSEi5F69CPAuDrsKnrwTJ3HN5FVLPgLHKUm",token:"0x966ebbfd7ecbcf44b1e05341976e0652cfa01360",cost:0,promisee:"0x4af74a76aA7B934C7397FDD0C2428762c8F7c550",promisor:"0xEb51Cf2a474BfC756cD40A9e9092E6eEe15f2dc3",result:"QmVZzCia7Ptm3CiDUcF9ZYkKQuMMjFCKYjS2ckZYzMJsm7"})},methods:{fetchBalance:function(){var t=this;return this.$robonomics.xrt.call.balanceOf(this.$robonomics.account.address).then(function(e){return t.balance=e,e>0&&t.$robonomics.xrt.call.allowance(t.$robonomics.account.address,t.$robonomics.factory.address)}).then(function(e){e&&(t.approveTrade=e)})},setResult:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.liability.findIndex(function(e){return e.address===t});r>=0&&s["default"].set(this.liability,r,Object(u["a"])({},this.liability[r],{result:e,check:n}))},confirm:function(t){var e=this,n=this.results.find(function(e){return e.liability===t});this.$robonomics.sendResult({liability:t,success:!0,result:n.result}).then(function(){n.status="confirm";var s=new f["Liability"](e.$robonomics.web3,t,"0x0000000000000000000000000000000000000000");s.onResult().then(function(){n.status="finish"})})}}},_=y,g=(n("f321"),n("2877")),x=Object(g["a"])(_,c,l,!1,null,null,null),k=x.exports,C=null,D=function(t){return C=new b.a({web3:web3,account:{address:web3.eth.accounts[0]},ens:{address:v.ens,suffix:v.ensSuffix,version:v.version},messageProvider:new f["MessageProviderIpfs"](t),lighthouse:v.lighthouse}),C},j=n("f684"),S=n.n(j),O=null,A=function(){if(null!==O)return S.a.resolve(O);var t=function(t,e){O=new Ipfs(w),O.once("ready",function(){return O.id(function(n,s){if(n)return e(n);console.log("ipfs id "+s.id),window.ipfs=O,t(O)})})},e=function(e,n){t(e,n)};return"complete"!==document.readyState?new S.a(function(t,n){window.addEventListener("load",function(){e(t,n)})}):new S.a(function(t,n){e(t,n)})},B=A,Q={name:"app",components:{Page:k},data:function(){return{ready:!1}},mounted:function(){var t=this;a.a.store.on("load",function(){B().then(function(e){s["default"].prototype.$robonomics=D(e),t.$robonomics.ready().then(function(){t.ready=!0})})})}},$=Q,P=Object(g["a"])($,r,i,!1,null,null,null),E=P.exports,L=n("ce5b"),M=n.n(L),T=function(t,e){var n=new web3.BigNumber(t);return n.shift(-e).toNumber()},N=function(t,e,n){return"".concat(T(t,e)," ").concat(n)};n("bf40");s["default"].config.productionTip=!1,s["default"].use(M.a),a.a.store.on("update",function(t){(null!==t.state.old.account&&t.action===o["ACTIONS"].UPD_ACCOUNT||null!==t.state.old.networkId&&t.action===o["ACTIONS"].UPD_NETWORK_ID)&&window.location.reload(!1)}),s["default"].use(a.a,{Web3:Web3,networks:[p],requireAccount:!0}),s["default"].filter("fromWei",N),new s["default"]({render:function(t){return t(E)}}).$mount("#app")},"655a":function(t,e,n){},f321:function(t,e,n){"use strict";var s=n("655a"),r=n.n(s);r.a}});
//# sourceMappingURL=app.8d0180b6.js.map